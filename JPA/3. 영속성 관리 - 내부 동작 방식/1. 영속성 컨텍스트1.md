## 영속성 컨텍스트

영속성 컨텍스트는 ```엔티티를 영구 저장하는 환경```을 뜻함
* 영속성 컨텍스트는 엔티티 매니저를 생성할 때 1개 만들어짐 (1 대 1)
* 엔티티 매니저를 통해서 영속성 컨텍스트에 접근, 관리 할 수 있음

```em.persist(member);```  

: 단순히 회원 엔티티를 저장한다고 표현하기보다, persist는 엔티티 매니저를 사용해서 회원 엔티티를 영속성 컨텍스트에 저장한다는 것이 더 정확한 표현!


## 엔티티의 생명주기

### 비영속

영속성 컨텍스트와 전혀 관계가 없는 새로운 상태

```java
Member m = new Member();
m.setId("member1");
m.setName("yejin");
```

객체를 생성했을 뿐 아직 저장하지 않은 상태!  
따라서 영속성 컨텍스트나 DB와는 전혀 관계가 없으며 이를 비영속 상태라 함

### 영속

영속성 컨텍스트에 의해 관리되는 상태

엔티티 매니저를 통해 엔티티를 영속성 컨텍스트에 저장하면, 영속성 컨텍스트가 관리하는 상태가 됨  
하지만 이것이 DB에 저장되었다는 뜻은 아님 (커밋되어야 쿼리가 날라가는 것!)

### 준영속

영속성 엔티티를 영속성 컨텍스트가 관리하지 않으면 준영속 상태가 됨

```em.deatch()```를 호출하거나 ```em.close()```를 호출해서 영속성 컨텍스를 닫거나, ```em.clear()```를 통해 영속성 컨텍스트를 초기화하면 됨

### 삭제

엔티티를 영속성 컨텍스트와 데이터베이스에서 삭제

```em.remove(member);```
