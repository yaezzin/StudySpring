# # 7-5.ìƒí’ˆ ë“±ë¡

<img width="500" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-03-02 á„‹á…©á„’á…® 7 22 54" src="https://user-images.githubusercontent.com/97823928/156343788-752064ff-5579-4118-b74a-034d24b2c35a.png">


## BasicControllerì— ì¶”ê°€

```java
@GetMapping("/add")
public String addForm() {
    return "basic/addForm";
}
```
* ì´ ë©”ì„œë“œëŠ” ë‹¨ìˆœíˆ basic/addForm ë·° í…œí”Œë¦¿ë§Œ í˜¸ì¶œ

``` java
@PostMapping("/add")
public String save() {
    return "basic/addForm";
}
```

* í•˜ë‚˜ì˜ URLë¡œ ë“±ë¡ í¼ê³¼ ë“±ë¡ ì²˜ë¦¬ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•˜ì.. saveëŠ” ìˆ˜ì • ì˜ˆì •!
* ìƒí’ˆ ë“±ë¡ í¼ : Get /basic/items/add
* ìƒí’ˆ ë“±ë¡ ì²˜ë¦¬ : Post /basic/items/add


## ìƒí’ˆ ë“±ë¡ í¼

templates/basic/addForm.html

``` html
<div class="col">
  <button class="w-100 btn btn-secondary btn-lg"
                onclick="location.href='items.html'"
                th:onclick="|location.href='@{/basic/items}'|"
                type="button">ì·¨ì†Œ
  </button>
</div>
```

*```th:onclick="|location.href='@{/basic/items}'|"``` th:onclickìœ¼ë¡œ ì·¨ì†Œ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ /basic/itemsë¡œ ì´ë™!


## ìƒí’ˆ ë“±ë¡ ì²˜ë¦¬

### V1

``` java
// @PostMapping("/add")
public String addItemV1(@RequestParam String itemName,
                        @RequestParam int price,
                        @RequestParam Integer quantity,
                        Model model) {
        // item ê°ì²´ ìƒì„±
        Item item = new Item();
        item.setItemName(itemName);
        item.setPrice(price);
        item.setQuantity(quantity);

        // ë¦¬í¬ì§€í† ë¦¬ì— ì €ì¥
        itemRepository.save(item);

        // item ê°ì²´ë¥¼ ëª¨ë¸ì— ë‹´ì•„ì„œ ë·°ì— ì „ë‹¬
        model.addAttribute("item", item);
        return "basic/item";
}

```

* ìƒí’ˆ ë“±ë¡ ì²˜ë¦¬ë¥¼ ìœ„í•´ addItemV1 ë©”ì„œë“œë¥¼ ì»¨íŠ¸ë¡¤ëŸ¬ì— ì¶”ê°€
* @RequestParamì„ í†µí•´ í•„ìš”í•œ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ì
* item ê°ì²´ë¥¼ ìƒì„±í•´ì„œ ì´ë¦„, ê°€ê²©, ìˆ˜ëŸ‰ í”„ë¡œí¼í‹°ë¥¼ ì„¸íŒ…
* item ê°ì²´ë¥¼ ë¦¬í¬ì§€í† ë¦¬ì— ì €ì¥í•˜ê³  ëª¨ë¸ì— ë‹´ìŒ -> ë“±ë¡í•˜ë©´ ìƒì„¸ í¼ ê²½ë¡œë¡œ ì´ë™

#### But ë„ˆë¬´ ì½”ë“œê°€ ê¸¸ë‹¤. @ModelAttributeë¡œ í•œë²ˆì— ì²˜ë¦¬í•˜ì

### V2

``` java
 @PostMapping("/add")
 public String addItemV2(@ModelAttribute("item") Item item, Model model) {
     itemRepository.save(item);
     return "basic/item";
}
```

[@ModelAttribute ê¸°ëŠ¥](https://github.com/yaezzin/StudySpring/blob/main/MVC1/6.%20%EC%8A%A4%ED%94%84%EB%A7%81%20MVC%20%EA%B8%B0%EB%B3%B8%20%EA%B8%B0%EB%8A%A5/6.RequestParam2.md)
* ğŸ’« Item ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ìš”ì²­ íŒŒë¼ë¯¸í„°ì˜ ê°’ì„ í”„ë¡œí¼í‹° ì ‘ê·¼ë²•(setXxx)ìœ¼ë¡œ ì…ë ¥
* ğŸ’« ëª¨ë¸(Model)ì— @ModelAttribute ë¡œ ì§€ì •í•œ ê°ì²´ë¥¼ ìë™ìœ¼ë¡œ ë„£ì–´ì¤Œ! -> ``` model.addAttribute("item", item);``` ìƒëµ ê°€ëŠ¥


### V3
``` java
 @PostMapping("/add")
 public String addItemV3(@ModelAttribute Item item, Model model) {
     itemRepository.save(item);
     return "basic/item";
}
```
* @ModelAttributeì˜ ì´ë¦„("xxx")ì„ ìƒëµí•  ìˆ˜ ìˆìŒ -> í•´ë‹¹ í´ë˜ìŠ¤ì˜ ì•ê¸€ìë¥¼ ì†Œë¬¸ìë¡œ ë°”ê¾¸ì–´ ë“±ë¡(ex. item)


### V4
``` java
 @PostMapping("/add")
 public String addItemV3(Item item, Model model) {
     itemRepository.save(item);
     return "basic/item";
}
```
* @ModelAttribute ìì²´ë„ ìƒëµ ê°€ëŠ¥í•œë°, ì´ëŠ” ê°ì²´ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë°›ê¸° ë•Œë¬¸!!
* í•˜ì§€ë§Œ @RequestParamë„ ìƒëµí•  ìˆ˜ ìˆì–´ì„œ í˜¼ë€ì´ ë°œìƒí•  ìˆ˜ ìˆì–´ì„œ ë‚˜ëŠ” ìƒëµí•˜ì§€ ì•ŠëŠ” ê²ƒì„ ì„ í˜¸í•¨
