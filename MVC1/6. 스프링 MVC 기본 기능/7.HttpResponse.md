# # 6-7. HTTP ì‘ë‹µ

### HTTP ì‘ë‹µ ë°©ë²•
1. ```ì •ì  ë¦¬ì†ŒìŠ¤``` : ì›¹ ë¸Œë¼ìš°ì €ì— ì •ì ì¸ Html, css, jsë¥¼ ì œê³µí•  ë•Œ -> íŒŒì¼ ê·¸ ìì²´ë¥¼ ë³´ë‚´ëŠ” ê²ƒê³¼ ê°™ìŒ 
2. ```ë·° í…œí”Œë¦¿ ì‚¬ìš©``` : ì›¹ ë¸Œë¼ìš°ì €ì— ë™ì ì¸ Htmlì„ ì œê³µ
3. ```HTTP ë©”ì„¸ì§€ ì‚¬ìš©``` : HTTP ë©”ì„¸ì§€ ë°”ë””ì— Json ê°™ì€ í˜•íƒœë¡œ ë°ì´í„°ë¥¼ ì‹¤ì–´ì„œ ë³´ë‚´ëŠ” ê²ƒ


## ì •ì  ë¦¬ì†ŒìŠ¤

ì •ì  ë¦¬ì†ŒìŠ¤ëŠ” í•´ë‹¹ íŒŒì¼ì„ ë³€ê²½ ì—†ì´ ê·¸ëŒ€ë¡œ ì„œë¹„ìŠ¤ í•˜ëŠ” ê²ƒ!  

```src/main/resources```ëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ë³´ê´€í•˜ëŠ” ê³³ì´ì í´ë˜ìŠ¤ì˜ ì‹œì‘ ê²½ë¡œ  
ğŸ‘‰ ë”°ë¼ì„œ ```src/main/resources/static```ì— ë¦¬ì†ŒìŠ¤ë¥¼ ë„£ì–´ë‘ë©´ ìŠ¤í”„ë§ë¶€íŠ¸ê°€ ì •ì  ë¦¬ì†ŒìŠ¤ë¡œ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•¨

```src/main/resources/static/basic/hello-form.html``` ê²½ë¡œì— í•´ë‹¹ íŒŒì¼ì´ ìˆìœ¼ë©´
http://localhost:8080/basic/hello-form.html ì²˜ëŸ¼ ì‹¤í–‰ ê°€ëŠ¥

## ë·° í…œí”Œë¦¿

ë·° í…œí”Œë¦¿ì„ ê±°ì³ì„œ HTMLì´ ìƒì„±ë˜ê³ , ë·°ê°€ ì‘ë‹µì„ ë§Œë“¤ì–´ì„œ ì „ë‹¬  
ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” ë·° í…œí”Œë¦¿ ê²½ë¡œ : " src/main/resources/templates  

ğŸ‘‰ ë·° í…œí”Œë¦¿ ìƒì„± : src/main/resources/templates/response/hello.html

* p íƒœê·¸ì˜ {data}ì— ê°’ì„ ë„£ì–´ì£¼ì–´ì„œ ë°˜í™˜í•´ì¤„ ê²ƒì„!

``` java
 <!DOCTYPE html>
  <html xmlns:th="http://www.thymeleaf.org">
  <head>
      <meta charset="UTF-8">
      <title>Title</title>
  </head>
  <body>
  <p th:text="${data}">empty</p>
  </body>
  </html>
```

#### ResponseViewController

```java
@Controller
public class ResponseViewController {
    
    // 1. ModelAndViewë¥¼ ë°˜í™˜í•˜ëŠ” ê²½ìš°
    @RequestMapping("/response-view-v1")
    public ModelAndView responseViewV1() {
        ModelAndView mav = new ModelAndView("response/hello")
                .addObject("data", "hello!"); // p íƒœê·¸ì— helloë¥¼ ë„£ì–´ì¤Œ
        return mav;
    }

    // 2. ìŠ¤íŠ¸ë§ ë°˜í™˜
    @RequestMapping("/response-view-v2")
    public String responseViewV2(Model model) {
        //@ResponseBodyê°€ ì—†ê¸° ë•Œë¬¸ì— ë·°ë¥¼ ì°¾ê³  ë Œë”ë§ -> response/hello.html
        model.addAttribute("data", "hello!");
        return "response/hello"; // @Controllerì´ë©´ì„œ ìŠ¤íŠ¸ë§ì„ ë°˜í™˜í•˜ë©´? -> ë¦¬í„´ê°’ì´ ë·°ì˜ ë…¼ë¦¬ì  ì´ë¦„ì´ ëœë‹¤!
    }

    //3. void ë°˜í™˜ : ê¶Œì¥í•˜ëŠ” ë°©ì‹ X
    @RequestMapping("/response/hello")
    public void responseViewV3(Model model) {
        model.addAttribute("data", "hello!");
        // return "response/hello";
        // ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ê²½ë¡œ ì´ë¦„ê³¼ ë·°ì˜ ë…¼ë¦¬ì ì´ë¦„ì´ ê°™ìœ¼ë©´ ë¦¬í„´ì„ ìƒëµí•´ì¤˜ë„ ë·°ê°€ ë°˜í™˜ë¨ -> ëª…ì‹œì ì´ì§€ ëª»í•¨
    }

}
```

## HTTP API, ë©”ì„¸ì§€ ë°”ë””ì— ì§ì ‘ ì…ë ¥

#### reponseBodyV1

``` java
@GetMapping("/response-body-string-v1")
public void responseBodyV1(HttpServletResponse response) throws IOException {
    response.getWriter().write("ok");
}
```

* ì„œë¸”ë¦¿ì„ ë‹¤ë£° ë•Œì²˜ëŸ¼ HttpServletResponse ê°ì²´ë¥¼ í†µí•´ì„œ HTTP ë©”ì„¸ì§€ ë°”ë””ì— Okë¥¼ ë°”ë¡œ ì „ë‹¬

#### reponseBodyV2
```java
@GetMapping("/response-body-string-v2")
public ResponseEntity<String> responseBodyV2() throws IOException {
    return new ResponseEntity<>("ok", HttpStatus.OK);
}
```

* ReponseEntityëŠ” HttpEntityë¥¼ ìƒì†ë°›ìŒ
* HttpEntityëŠ” HTTP ë©”ì‹œì§€ì˜ í—¤ë”, ë°”ë”” ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆìŒ
* ResponseEntityëŠ” ì—¬ê¸°ì— ë”í•´ì„œ HTTP ì‘ë‹µ ì½”ë“œë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŒ

#### reponseBodyV3

```java 
@ResponseBody
@GetMapping("/response-body-string-v3")
public String responseBodyV3() throws IOException {
    return "ok";
}
```
* @ReponseBody ë¥¼ ì‚¬ìš©í•˜ë©´ HTTP ë©”ì„¸ì§€ ì»¨ë²„í„°ë¥¼ í†µí•´ HTTPë©”ì„¸ì§€ë¥¼ ì§ì ‘ ì…ë ¥í•  ìˆ˜ ìˆìŒ

#### responseBodyJsonV1

```java
@ResponseBody
@GetMapping("/response-body-json-v1")
public ResponseEntity<HelloData> responseBodyJsonV1() {
    HelloData helloData = new HelloData();
    helloData.setUsername("userA");
    helloData.setAge(20);
    return new ResponseEntity<>(helloData, HttpStatus.OK);
}
```
* ResponseEntityë¥¼ ë°˜í™˜ -> HTTP ë©”ì„¸ì§€ ì»¨ë²„í„°ë¥¼ í†µí•´ Jsonìœ¼ë¡œ ë³€í™˜ë˜ì–´ ë°˜í™˜ë¨

#### responseBodyJsonV2

```java
@ResponseStatus(HttpStatus.OK) //responseEntityê°€ ì—†ìœ¼ë©´ statusë¥¼ ì´ ì—ë…¸í…Œì´ì…˜ìœ¼ë¡œ ì§€ì •í•´ì¤˜ì•¼í•¨
@ResponseBody
@GetMapping("/response-body-json-v2")
public HelloData responseBodyJsonV2() {
     HelloData helloData = new HelloData();
     helloData.setUsername("userA");
     helloData.setAge(20);
     return helloData;
}
```
* responseEntityê°€ ì—†ìœ¼ë©´ statusë¥¼ @ResponseStatus(HttpStatus.XXX)ë¡œ ì§€ì •í•´ì£¼ì–´ì•¼í•¨

## RestController

* ```@RestController``` = ```@Controller``` + ```@ResponseBody```
* @ResponseBody ëŠ” í´ë˜ìŠ¤ ë ˆë²¨ì— ë‘ë©´ ì „ì²´ì— ë©”ì„œë“œì— ì ìš©ë˜ëŠ”ë°, @RestController ì—ë…¸í…Œì´ì…˜ ì•ˆì— @ResponseBody ê°€ ì ìš©ë˜ì–´ ìˆìŒ
